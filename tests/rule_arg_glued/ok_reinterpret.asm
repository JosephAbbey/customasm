#ruledef test
{
    ld %{x} => 0x55 @ x`8
    ld ${x} => 0x66 @ x`8
}

ld %0 ; = 0x5500
ld %(0) ; = 0x5500
ld % 0 ; = 0x5500
ld %12 ; = 0x550c
ld %(6 + 6) ; = 0x550c
ld % 6 + 6 ; = 0x550c
ld %6 + 6 ; = 0x550c
ld %257 ; = 0x5501
ld % 0xff ; = 0x55ff
ld %0xff ; = 0x55ff
ld %0x123 ; = 0x5523

ld $0 ; = 0x6600
ld $(0) ; = 0x6600
ld $ 0 ; = 0x6600
ld $12 ; = 0x660c
ld $(6 + 6) ; = 0x660c
ld $ 6 + 6 ; = 0x660c
ld $6 + 6 ; = 0x660c
ld $257 ; = 0x6601
ld $ 0xff ; = 0x66ff
ld $0xff ; = 0x66ff
ld $0x123 ; = 0x6623